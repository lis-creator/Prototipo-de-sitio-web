<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Administración de Calendario - Colegio el divino salvador de A.M.E.N</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Iconos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ======== ENCABEZADO ======== */
        header {
            background-color: #ffffff;
            border-bottom: 5px solid #18458A;
            position: relative;
            z-index: 1000;
            padding: 10px 0;
        }
        .navbar-brand {
            display: flex;
            align-items: center;
            flex-grow: 1;
        }
        .navbar-brand img {
            height: 50px;
            width: auto;
        }
        .navbar-brand span {
            font-weight: bold;
            margin-left: 10px;
        }
        /* Navbar links */
        .navbar-nav .nav-link {
            font-weight: 500;
            color: #333 !important;
            padding: 0.5rem 1rem;
        }
        .navbar-nav .nav-link:hover {
            color: #0963ea!important;
        }
        /* Toggler */
        .navbar-toggler {
            border: none;
            padding: 4px 8px;
            margin-left: auto;
        }
        .navbar-toggler:focus {
            box-shadow: none;
        }
        .navbar-toggler-icon {
            background-image: url("data:image/svg+xml;charset=utf8,%3Csvg viewBox='0 0 30 30' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath stroke='rgba%280,0,0,0.7%29' stroke-width='2' stroke-linecap='round' stroke-miterlimit='10' d='M4 7h22M4 15h22M4 23h22'/%3E%3C/svg%3E");
            width: 1.2em;
            height: 1.2em;
        }
        /* Estilos para móviles */
        @media (max-width: 767.98px) {
            header .container {
                padding: 0 15px;
            }
            .navbar-brand {
                flex-grow: 1;
                max-width: calc(100% - 60px);
            }
            .navbar-brand img {
                height: 40px;
            }
            .navbar-brand span {
                display: none;
            }
            .navbar-toggler {
                order: 2;
                margin-left: auto;
            }
            .navbar-collapse {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100vh;
                background: rgba(0,0,0,0.95);
                padding: 2rem;
                transition: transform 0.3s ease-in-out;
                transform: translateX(-100%);
                z-index: 1040;
                display: flex !important;
                flex-direction: column;
                justify-content: center;
                align-items: center;
            }
            .navbar-collapse.show {
                transform: translateX(0);
            }
            .navbar-nav {
                width: 100%;
                text-align: center;
            }
            .navbar-nav .nav-item {
                margin: 15px 0;
            }
            .navbar-nav .nav-link {
                font-size: 1.5rem;
                color: #fff !important;
                padding: 10px 0;
            }
            .navbar-nav .nav-link:hover {
                color: #18458A!important;
            }
            .close-menu {
                position: absolute;
                top: 20px;
                right: 20px;
                background: none;
                border: none;
                color: white;
                font-size: 1.5rem;
                cursor: pointer;
                z-index: 1050;
            }
        }
        /* Estilos para escritorio */
        @media (min-width: 768px) {
            .navbar-collapse {
                display: flex !important;
            }
            .close-menu {
                display: none;
            }
            .navbar-brand span {
                font-size: 1.5rem;
                display: inline;
            }
        }
        
        /* ======== SECCIÓN ADMINISTRACIÓN ======== */
        .admin-header {
            background-color: #18458A;;
            color: white;
            padding: 20px 0;
            text-align: center;
            margin-bottom: 30px;
        }
        .admin-container {
            padding: 20px 0 40px;
        }
        .event-form-container {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
        }
        .event-form-title {
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
        }
        .events-table-container {
            background-color: rgb(255, 255, 255);
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.211);
        }
        .backup-section {
            border-top: 1px solid #858789;
            padding-top: 20px;
            margin-top: 20px;
        }
        
        /* Notificaciones */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1200;
            min-width: 300px;
            animation: slideIn 0.3s ease-out;
        }
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        /* ======== PIE DE PÁGINA ======== */
        footer {
            background-color: #000000;
            color: #fff;
            padding: 40px 20px;
        }
        footer h5 {
            font-weight: bold;
            margin-bottom: 15px;
        }
        footer a {
            color: #fff;
            text-decoration: none;
        }
        footer a:hover {
            color: #18458A;;
        }
        .social-icons a {
            font-size: 1.5rem;
            margin: 0 10px;
            color: #fff;
            transition: color 0.3s;
        }
        .social-icons a:hover {
            color: #18458A;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <nav class="navbar navbar-expand-md p-0">
                <a class="navbar-brand" href="index.html">
                 <img src="img/Logo Actual.png" alt="Colegio Divino salvador de A.M.E.N">
                    <span>COLEGIO EL DIVINO SALVADOR DE A.M.E.N</span>
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#menuNav" aria-controls="menuNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="menuNav">
                    <button class="close-menu d-md-none" type="button" aria-label="Cerrar menú">
                        <i class="fas fa-times"></i>
                    </button>
                    <ul class="navbar-nav ms-auto text-center">
                        <li class="nav-item"><a href="index.html" class="nav-link">Inicio</a></li>
                        <li class="nav-item"><a href="calendario.html" class="nav-link">Calendario</a></li>
                         <li class="nav-item"><a href="Portal academico.html" class="nav-link">portal academico</a></li> 
                    </ul>
                </div>
            </nav>
        </div>
    </header>

    <main>
        <!-- Banner Rotativo -->
  <div id="bannerCarousel" class="carousel slide" data-bs-ride="carousel">
    <div class="carousel-indicators">
      <button type="button" data-bs-target="#bannerCarousel" data-bs-slide-to="0" class="active"></button>
      <button type="button" data-bs-target="#bannerCarousel" data-bs-slide-to="1"></button>
      <button type="button" data-bs-target="#bannerCarousel" data-bs-slide-to="2"></button>
    </div>
    <div class="carousel-inner">
      <div class="carousel-item active" data-bs-interval="3000">
        <img src="img/indepe.jpg" class="d-block w-100" alt="Banner 1">
        <div class="carousel-caption d-none d-md-block">
          <h5>Bienvenido al Colegio el divino salvador de A.M.E.N</h5>
          <p>Camino,verdad,Vida.</p>
        </div>
      </div>
      <div class="carousel-item" data-bs-interval="3000">
       <img src="img/futbol2_n.jpg" class="d-block w-100" alt="Banner 2">
        <div class="carousel-caption d-none d-md-block">
          <h5>Educación de calidad</h5>
          <p>Comprometidos con la excelencia académica</p>
        </div>
      </div>
      <div class="carousel-item" data-bs-interval="3000">
         <img src="img/futbol1.jpg" class="d-block w-100" alt="Banner 3">
        <div class="carousel-caption d-none d-md-block">
          <h5>Innovación y Valores</h5>
          <p>Desarrollando líderes para el futuro</p>
        </div>
      </div>
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#bannerCarousel" data-bs-slide="prev">
      <span class="carousel-control-prev-icon"></span>
      <span class="visually-hidden">Anterior</span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#bannerCarousel" data-bs-slide="next">
      <span class="carousel-control-next-icon"></span>
      <span class="visually-hidden">Siguiente</span>
    </button>
  </div>
        <!-- Encabezado de administración -->
        <section class="admin-header">
            <div class="container">
                <h1>Administración del Calendario Escolar</h1>
                <p class="lead">Gestione las actividades y eventos del calendario académico</p>
            </div>
        </section>
        
        <!-- Contenido de administración -->
        <section class="admin-container">
            <div class="container">
                <div class="row">
                    <div class="col-lg-6">
                        <!-- Formulario para agregar eventos -->
                        <div class="event-form-container">
                            <h3 class="event-form-title" id="form-title">Agregar Nueva Actividad</h3>
                            <form id="event-form">
                                <input type="hidden" id="event-id">
                                <div class="mb-3">
                                    <label for="event-title" class="form-label">Título de la Actividad</label>
                                    <input type="text" class="form-control" id="event-title" required>
                                </div>
                                <div class="mb-3">
                                    <label for="event-description" class="form-label">Descripción</label>
                                    <textarea class="form-control" id="event-description" rows="3"></textarea>
                                </div>
                                <div class="mb-3">
                                    <label for="event-date" class="form-label">Fecha</label>
                                    <input type="date" class="form-control" id="event-date" required>
                                </div>
                                <div class="mb-3">
                                    <label for="event-end-date" class="form-label">Fecha de Finalización (opcional)</label>
                                    <input type="date" class="form-control" id="event-end-date">
                                </div>
                                <div class="mb-3">
                                    <label for="event-type" class="form-label">Tipo de Actividad</label>
                                    <select class="form-select" id="event-type">
                                        <option value="academico">Académico</option>
                                        <option value="cultural">Cultural</option>
                                        <option value="deportivo">Deportivo</option>
                                        <option value="religioso">Religioso</option>
                                        <option value="administrativo">Administrativo</option>
                                    </select>
                                </div>
                                <div class="d-grid gap-2">
                                    <button type="submit" class="btn btn-primary" id="submit-btn">Agregar Actividad</button>
                                    <button type="button" class="btn btn-secondary" id="cancel-btn" style="display: none;">Cancelar</button>
                                </div>
                            </form>
                            
                            <!-- Sección de respaldo de datos -->
                            <div class="backup-section">
                                <h5 class="event-form-title">Respaldo de Datos</h5>
                                <div class="d-grid gap-2">
                                    <button type="button" class="btn btn-outline-success" id="export-btn">
                                        <i class="fas fa-download me-2"></i>Exportar Eventos
                                    </button>
                                    <div>
                                        <input type="file" id="import-file" accept=".json" class="d-none">
                                        <button type="button" class="btn btn-outline-info w-100" id="import-btn">
                                            <i class="fas fa-upload me-2"></i>Importar Eventos
                                        </button>
                                    </div>
                                    <button type="button" class="btn btn-outline-warning" id="clear-data-btn">
                                        <i class="fas fa-trash me-2"></i>Limpiar Todos los Datos
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-6">
                        <!-- Lista de eventos para administración -->
                        <div class="events-table-container">
                            <h3 class="event-form-title">Eventos Programados</h3>
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th>Fecha</th>
                                            <th>Título</th>
                                            <th>Tipo</th>
                                            <th>Acciones</th>
                                        </tr>
                                    </thead>
                                    <tbody id="events-table-body">
                                        <!-- Los eventos se generarán con JavaScript -->
                                    </tbody>
                                </table>
                            </div>
                            <div id="no-events-message" class="text-center p-3" style="display: none;">
                                <p>No hay eventos programados.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Pie de página -->
 <footer>
  <div class="container">
    <div class="row">
      <div class="col-md-4 mb-4">
        <h5>Contacto</h5>
        <p><i class="fa-solid fa-envelope"></i> contacto@cColegiodivinosalvador.edu.ni</p>
        <p><i class="fa-solid fa-phone"></i> +505 2293 5109</p>
        <p><i class="fa-solid fa-location-dot"></i> Managua, Nicaragua</p>
      </div>
      <div class="col-md-4 mb-4">
        <h5>Mapa de Ubicación</h5>
        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3900.4766771204677!2d-86.34929252493728!3d12.147916388096831!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8f71515061cc78a1%3A0xdcd69866a7397032!2sColegio%20Divino%20Salvador!5e0!3m2!1ses-419!2sni!4v1759945659266!5m2!1ses-419!2sni" width="100%" height="200" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
      </div>
      <div class="col-md-4 mb-4">
        <h5>Redes Sociales</h5>
       <div class="social-icons">
  <a href="https://www.facebook.com/eldivinosalvador2014?locale=es_LA" target="_blank"><i class="fab fa-facebook"></i></a>
  <a href="https://www.instagram.com/https://www.instagram.com/divinosalvadorde/" target="_blank"><i class="fab fa-instagram"></i></a>
  <a href="https://www.tiktok.com/@https://www.tiktok.com/@divino.salvador.a0?is_from_webapp=1&sender_device=pc" target="_blank"><i class="fab fa-tiktok"></i></a>
</div>

      </div>
    </div>
  </div>
</footer>
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Clave para localStorage
        const STORAGE_KEY = 'colegio_bautista_calendario';

        // Variables globales
        let events = [];
        let editingEventId = null;

        // Cargar eventos desde localStorage
        function loadEvents() {
            try {
                const stored = localStorage.getItem(STORAGE_KEY);
                if (stored) {
                    const parsed = JSON.parse(stored);
                    // Asegurarse de que todos los eventos tengan las propiedades necesarias
                    return parsed.map(event => ({
                        id: event.id,
                        title: event.title || '',
                        description: event.description || '',
                        date: event.date,
                        endDate: event.endDate || null,
                        type: event.type || 'academico'
                    }));
                }
            } catch (error) {
                console.error('Error al cargar eventos:', error);
            }
            return []; // Si no hay datos, devolver array vacío
        }

        // Guardar eventos en localStorage
        function saveEvents(eventsArray) {
            try {
                localStorage.setItem(STORAGE_KEY, JSON.stringify(eventsArray));
                return true;
            } catch (error) {
                console.error('Error al guardar eventos:', error);
                showNotification('Error al guardar los datos. Verifique que tiene suficiente espacio de almacenamiento.', 'danger');
                return false;
            }
        }

        // Función para mostrar notificaciones
        function showNotification(message, type = 'info') {
            // Crear elemento de notificación
            const notification = document.createElement('div');
            notification.className = `alert alert-${type} alert-dismissible fade show notification`;
            notification.innerHTML = `
                ${message}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            `;
            
            document.body.appendChild(notification);
            
            // Auto-eliminar después de 3 segundos
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.remove();
                }
            }, 3000);
        }

        // Inicializar la página de administración
        document.addEventListener('DOMContentLoaded', function() {
            // Cargar eventos desde localStorage
            events = loadEvents();
            
            updateEventsTable();
            
            // Configurar formulario de eventos
            document.getElementById('event-form').addEventListener('submit', function(e) {
                e.preventDefault();
                if (editingEventId) {
                    updateEvent();
                } else {
                    addEvent();
                }
            });
            
            // Configurar botón de cancelar edición
            document.getElementById('cancel-btn').addEventListener('click', function() {
                resetForm();
            });
            
            // Configurar menú móvil
            const closeMenuBtn = document.querySelector('.close-menu');
            const navbarCollapse = document.getElementById('menuNav');
            
            if (closeMenuBtn) {
                closeMenuBtn.addEventListener('click', function() {
                    const bsCollapse = new bootstrap.Collapse(navbarCollapse, {
                        toggle: false
                    });
                    bsCollapse.hide();
                });
            }
            
            // Cerrar menú al hacer clic en un enlace (solo en móviles)
            const navLinks = document.querySelectorAll('.navbar-nav .nav-link');
            navLinks.forEach(link => {
                link.addEventListener('click', function() {
                    if (window.innerWidth < 768) {
                        const bsCollapse = new bootstrap.Collapse(navbarCollapse, {
                            toggle: false
                        });
                        bsCollapse.hide();
                    }
                });
            });
            
            // Configurar botones de exportación/importación
            document.getElementById('export-btn').addEventListener('click', exportEvents);
            document.getElementById('import-btn').addEventListener('click', function() {
                document.getElementById('import-file').click();
            });
            document.getElementById('import-file').addEventListener('change', importEvents);
            document.getElementById('clear-data-btn').addEventListener('click', clearAllData);
        });

        // Función para agregar un nuevo evento
        function addEvent() {
            const title = document.getElementById('event-title').value;
            const description = document.getElementById('event-description').value;
            const date = document.getElementById('event-date').value;
            const endDate = document.getElementById('event-end-date').value || null;
            const type = document.getElementById('event-type').value;
            
            // Validaciones básicas
            if (!title.trim()) {
                showNotification('Por favor ingrese un título para la actividad', 'warning');
                return;
            }
            
            if (!date) {
                showNotification('Por favor seleccione una fecha', 'warning');
                return;
            }
            
            // Generar ID único
            const newId = events.length > 0 ? Math.max(...events.map(e => e.id)) + 1 : 1;
            
            const newEvent = {
                id: newId,
                title: title.trim(),
                description: description.trim(),
                date,
                endDate,
                type
            };
            
            events.push(newEvent);
            
            // Guardar en localStorage
            if (saveEvents(events)) {
                // Limpiar formulario
                resetForm();
                
                // Actualizar tabla de eventos
                updateEventsTable();
                
                // Mostrar mensaje de éxito
                showNotification('Evento agregado exitosamente', 'success');
            }
        }

        // Función para actualizar un evento existente
        function updateEvent() {
            const title = document.getElementById('event-title').value;
            const description = document.getElementById('event-description').value;
            const date = document.getElementById('event-date').value;
            const endDate = document.getElementById('event-end-date').value || null;
            const type = document.getElementById('event-type').value;
            
            // Validaciones básicas
            if (!title.trim()) {
                showNotification('Por favor ingrese un título para la actividad', 'warning');
                return;
            }
            
            if (!date) {
                showNotification('Por favor seleccione una fecha', 'warning');
                return;
            }
            
            // Encontrar el índice del evento que se está editando
            const eventIndex = events.findIndex(e => e.id === editingEventId);
            
            if (eventIndex !== -1) {
                // Actualizar el evento
                events[eventIndex] = {
                    id: editingEventId,
                    title: title.trim(),
                    description: description.trim(),
                    date,
                    endDate,
                    type
                };
                
                // Guardar en localStorage
                if (saveEvents(events)) {
                    // Limpiar formulario
                    resetForm();
                    
                    // Actualizar tabla de eventos
                    updateEventsTable();
                    
                    // Mostrar mensaje de éxito
                    showNotification('Evento actualizado exitosamente', 'success');
                }
            }
        }

        // Función para eliminar un evento
        function deleteEvent(eventId) {
            if (!confirm('¿Está seguro de que desea eliminar este evento?')) {
                return;
            }
            
            events = events.filter(e => e.id !== eventId);
            
            // Guardar en localStorage
            if (saveEvents(events)) {
                // Actualizar tabla de eventos
                updateEventsTable();
                
                // Si estábamos editando este evento, limpiar el formulario
                if (editingEventId === eventId) {
                    resetForm();
                }
                
                showNotification('Evento eliminado exitosamente', 'success');
            }
        }

        // Función para editar un evento
        function editEvent(eventId) {
            const event = events.find(e => e.id === eventId);
            if (!event) return;
            
            // Llenar formulario con datos del evento
            document.getElementById('event-id').value = event.id;
            document.getElementById('event-title').value = event.title;
            document.getElementById('event-description').value = event.description || '';
            document.getElementById('event-date').value = event.date;
            document.getElementById('event-end-date').value = event.endDate || '';
            document.getElementById('event-type').value = event.type;
            
            // Cambiar el formulario a modo edición
            editingEventId = eventId;
            document.getElementById('form-title').textContent = 'Editar Actividad';
            document.getElementById('submit-btn').textContent = 'Actualizar Actividad';
            document.getElementById('cancel-btn').style.display = 'block';
            
            // Desplazar hacia el formulario
            document.getElementById('event-form').scrollIntoView({ behavior: 'smooth' });
        }

        // Función para restablecer el formulario
        function resetForm() {
            document.getElementById('event-form').reset();
            document.getElementById('event-id').value = '';
            editingEventId = null;
            document.getElementById('form-title').textContent = 'Agregar Nueva Actividad';
            document.getElementById('submit-btn').textContent = 'Agregar Actividad';
            document.getElementById('cancel-btn').style.display = 'none';
        }

        // Función para actualizar la tabla de eventos
        function updateEventsTable() {
            const tableBody = document.getElementById('events-table-body');
            const noEventsMessage = document.getElementById('no-events-message');
            
            tableBody.innerHTML = '';
            
            if (events.length === 0) {
                noEventsMessage.style.display = 'block';
                return;
            }
            
            noEventsMessage.style.display = 'none';
            
            // Ordenar eventos por fecha
            const sortedEvents = [...events].sort((a, b) => new Date(a.date) - new Date(b.date));
            
            sortedEvents.forEach(event => {
                const eventDate = new Date(event.date);
                const formattedDate = eventDate.toLocaleDateString('es-ES');
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${formattedDate}</td>
                    <td>${event.title}</td>
                    <td>${getEventTypeText(event.type)}</td>
                    <td>
                        <button class="btn btn-sm btn-primary me-1" onclick="editEvent(${event.id})">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-sm btn-danger" onclick="deleteEvent(${event.id})">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
        }

        // Función para obtener texto descriptivo del tipo de evento
        function getEventTypeText(type) {
            const typeMap = {
                'academico': 'Académico',
                'cultural': 'Cultural',
                'deportivo': 'Deportivo',
                'religioso': 'Religioso',
                'administrativo': 'Administrativo'
            };
            return typeMap[type] || type;
        }

        // Exportar eventos a archivo JSON
        function exportEvents() {
            const dataStr = JSON.stringify(events, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `calendario_bautista_${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);
            
            showNotification('Eventos exportados exitosamente', 'success');
        }

        // Importar eventos desde archivo JSON
        function importEvents(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const importedEvents = JSON.parse(e.target.result);
                    
                    if (!Array.isArray(importedEvents)) {
                        throw new Error('Formato de archivo inválido');
                    }
                    
                    // Validar estructura básica de los eventos
                    const validEvents = importedEvents.filter(evt => 
                        evt.title && evt.date && evt.type
                    );
                    
                    if (validEvents.length === 0) {
                        throw new Error('No se encontraron eventos válidos en el archivo');
                    }
                    
                    if (confirm(`¿Desea reemplazar los eventos actuales con ${validEvents.length} eventos del archivo?`)) {
                        events = validEvents.map((evt, index) => ({
                            ...evt,
                            id: index + 1 // Reasignar IDs
                        }));
                        
                        if (saveEvents(events)) {
                            updateEventsTable();
                            showNotification(`${validEvents.length} eventos importados exitosamente`, 'success');
                        }
                    }
                    
                } catch (error) {
                    console.error('Error al importar eventos:', error);
                    showNotification('Error al importar eventos: ' + error.message, 'danger');
                }
            };
            reader.readAsText(file);
            
            // Limpiar input file
            event.target.value = '';
        }

        // Limpiar todos los datos
        function clearAllData() {
            if (confirm('¿Está seguro de que desea eliminar TODOS los eventos? Esta acción no se puede deshacer.')) {
                events = [];
                if (saveEvents(events)) {
                    updateEventsTable();
                    resetForm();
                    showNotification('Todos los eventos han sido eliminados', 'success');
                }
            }
        }
    </script>
</body>
</html>